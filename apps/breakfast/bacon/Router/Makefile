COMPONENT=RouterAppC

GLOBAL_CHANNEL?=0
CFLAGS +=-DGLOBAL_CHANNEL=$(GLOBAL_CHANNEL)

SUBNETWORK_CHANNEL?=32
CFLAGS +=-DSUBNETWORK_CHANNEL=$(SUBNETWORK_CHANNEL)

ROUTER_CHANNEL?=64
CFLAGS +=-DROUTER_CHANNEL=$(ROUTER_CHANNEL)

CFLAGS += -DCX_BASESTATION=0
CFLAGS += -DCX_ROUTER=1

CFLAGS += -I$(TOSDIR)/platforms/bacon/hardware/usci/noShare
CFLAGS += -I$(TOSDIR)/platforms/bacon/hardware/usci/noI2c
CFLAGS += -I$(TOSDIR)/platforms/bacon/chips/stm25p/noI2c

CFLAGS+=-I$(TOSDIR)/lib/serialprintf

CFLAGS += -I$(TOSDIR)/lib/cxl/link
CFLAGS += -I$(TOSDIR)/lib/cxl/packet
CFLAGS += -I$(TOSDIR)/lib/cxl/mac
CFLAGS += -I$(TOSDIR)/lib/cxl/am
CFLAGS += -I$(TOSDIR)/lib/cxl/debug
CFLAGS += -I$(TOSDIR)/lib/cxl/scheduler
CFLAGS += -I$(TOSDIR)/lib/cxl/routing
CFLAGS += -I$(TOSDIR)/lib/cx/routing
CFLAGS += -I$(TOSDIR)/lib/cx/debug
CFLAGS += -I$(TOSDIR)/lib/rf1a-tdma/timer

CFLAGS += -I$(TOSROOT)/apps/breakfast/util

PFLAGS+=-DMSP430XV2_DCO_CONFIG=MSP430XV2_DCO_32MHz_RSEL6
CFLAGS+=-DXT2_SMCLK


#NB: length field is 8 bits: so if we are using FEC, we need to make
# sure that the total packet length is less than this.
#CFLAGS+= -DTOSH_DATA_LENGTH=109
#CFLAGS+= -DMAX_RECORD_PACKET_LEN=80
CFLAGS+= -DRF1A_FEC_ENABLED=1

MAX_POWER?= 0x2D
CFLAGS += -DMAX_POWER=$(MAX_POWER)

MIN_POWER?= 0x03
CFLAGS += -DMIN_POWER=$(MIN_POWER)

FRAMELEN_FAST_SHORT?=37050UL
CFLAGS+=-DFRAMELEN_FAST_SHORT=$(FRAMELEN_FAST_SHORT)

CX_MAX_DEPTH?=8
CFLAGS+=-DCX_MAX_DEPTH=$(CX_MAX_DEPTH)

LPP_DEFAULT_PROBE_INTERVAL?=1024UL
CFLAGS += -DLPP_DEFAULT_PROBE_INTERVAL=$(LPP_DEFAULT_PROBE_INTERVAL)

LPP_SLEEP_TIMEOUT?=30720UL
CFLAGS+=-DLPP_SLEEP_TIMEOUT=$(LPP_SLEEP_TIMEOUT)

CFLAGS += -DSELF_SFD_SYNCH=1
CFLAGS += -DPOWER_ADJUST=1

####non-cx settings
DEFAULT_SAMPLE_INTERVAL?=61440UL
CFLAGS += -DDEFAULT_SAMPLE_INTERVAL=$(DEFAULT_SAMPLE_INTERVAL)

CFLAGS+=-DSINGLE_RECORD_READ=1
#CFLAGS += -I../BaconSampler
CFLAGS += -I../settingsStorage
CFLAGS += -I../RebootCounter
CFLAGS += -I../Ping
CFLAGS+=-I$(TOSROOT)/apps/breakfast/util
CFLAGS+=-I$(TOSROOT)/apps/breakfast/util/globalID
CFLAGS+=-I$(TOSROOT)/apps/breakfast/bacon/Metadata
CFLAGS+=-I$(TOSROOT)/apps/breakfast/bacon/autoPush
CFLAGS+=-I$(TOSDIR)/chips/msp430/tlvStorage
CFLAGS += -I../../util/stackGuard
CFLAGS += -I../../util

#TODO: hook up to sd card log storage impl

ENABLE_BACON_SAMPLER?=0
CFLAGS += -DENABLE_BACON_SAMPLER=$(ENABLE_BACON_SAMPLER)
ENABLE_TOAST_SAMPLER?=0
CFLAGS += -DENABLE_TOAST_SAMPLER=$(ENABLE_TOAST_SAMPLER)
ENABLE_PHOENIX?=0
CFLAGS += -DPHOENIX_LOGGING=$(ENABLE_PHOENIX)
ENABLE_SETTINGS_LOGGING?=0
CFLAGS += -DENABLE_SETTINGS_LOGGING=$(ENABLE_SETTINGS_LOGGING)
ENABLE_SETTINGS_CONFIG?=0
CFLAGS += -DENABLE_SETTINGS_CONFIG=$(ENABLE_SETTINGS_CONFIG)
ENABLE_SETTINGS_CONFIG_FULL?=1
CFLAGS += -DENABLE_SETTINGS_CONFIG_FULL=$(ENABLE_SETTINGS_CONFIG_FULL)
ENABLE_AUTOPUSH?=1
CFLAGS += -DENABLE_AUTOPUSH=$(ENABLE_AUTOPUSH)
ENABLE_CONFIGURABLE_LOG_NOTIFY?=0
CFLAGS += -DENABLE_CONFIGURABLE_LOG_NOTIFY=$(ENABLE_CONFIGURABLE_LOG_NOTIFY)
ENABLE_PROBE_SCHEDULE_CONFIG?=0
CFLAGS += -DENABLE_PROBE_SCHEDULE_CONFIG=$(ENABLE_PROBE_SCHEDULE_CONFIG)

ENABLE_PRINTF ?= 1
CFLAGS += -DENABLE_PRINTF=$(ENABLE_PRINTF)
CFLAGS += -DRAW_SERIAL_PRINTF=1
CFLAGS += -DDL_LPP=DL_NONE
CFLAGS += -DDL_LINK=DL_ERROR
CFLAGS += -DDL_SCHED=DL_INFO
CFLAGS += -DDL_SCHED_RX=DL_NONE
CFLAGS += -DLOG_CTS_TIME=0
CFLAGS += -DLOG_NEIGHBORHOOD=0
CFLAGS += -DDL_ROUTER=DL_ERROR
CFLAGS += -DDL_GLOBAL=DL_DEBUG

CFLAGS += -DCX_LPP_BASIC=0

CFLAGS+=-DCC430_PIN_DEBUG=1

include $(MAKERULES)
